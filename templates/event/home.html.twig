{% extends 'base.html.twig' %}

{% block title %}{% trans %}Events{% endtrans %}{% endblock %}

{% block body %}
    {% for event in events %}
        <div class="modal" id="modalEvent{{ event.id }}">
            <div class="modal-background" onclick="this.parentElement.classList.remove('is-active')"></div>
            <div class="modal-content box has-background-success-light">
                {{ include('event/modal_event_details.html.twig') }}
            </div>
            <button class="modal-close is-large" aria-label="close" onclick="this.parentElement.classList.remove('is-active')"></button>
        </div>
    {% endfor %}

    <div class="section column has-text-white">
        <h1 class="title has-text-white">{% trans %}Events page{% endtrans %}</h1>
        <p class="has-text-white">
            {% trans %}Find all the information about the next events{% endtrans %}
            <br>
            {% trans %}Dates and times, places and reservation, opt for reminders so you don't miss anything{% endtrans %}
        </p>
    </div>

    <div class="container">

            <div class="is-flex-tablet is-flex-direction-row">

                <div class="column p-0 slide-fade-left">
                    {{ include('event/major_event.html.twig') }}
                </div>

                <div class="column is-one-quarter-desktop is-one-third-tablet slide-fade-right">
                    {{ include('includes/calendar.html.twig') }}
                </div>

            </div>

        {% if events|length > 0 %}
            <div class="column">
                <a href="{{ path('event_all') }}" class="button is-size-4 is-success is-light is-fullwidth box-shadow-bulma has-text-weight-bold">
                    {% trans %}See all events{% endtrans %} ...
                </a>
            </div>

            <div class="column">
                <!-- Events box for mobile -->
                {#            {% set count_1 = 0 %}#}
                {#            {% for event in events[1:] %}#}
                {#                {% if count_1 < 4 %}#}
                {#                    {{ include('event/event_container_touch.html.twig') }}#}
                {#                {% endif %}#}
                {#                {% set count_1 = count_1 + 1 %}#}
                {#            {% endfor %}#}
                <!-- End Event box for mobile -->
                {#
                {% if events|length > 0 %}
                    {{ include('event/carousel_events.html.twig') }}
                {% endif %}
                #}
            </div>
        {% endif %}

    </div>
{% endblock %}


{% block javascripts %}

{#          BULMA CAROUSEL            #}
    <script>
        //initialize options :

        var options = {
            initialSlide: 0,
            slidesToShow: 1,
            infinite: true,
            loop:true,
            effect: 'translate',
            autoplay: true,
            navigation:true,
            navigationSwipe: true,
            navigationKeys: false,
            pagination: false,
            duration:1500,
            autoplaySpeed:3000,
        };

        // Initialize all div with carousel class
        var carousels = bulmaCarousel.attach('.carousel', options);

        // Loop on each carousel initialized
        for(var i = 0; i < carousels.length; i++) {
            // Add listener to  event
            // carousels[i].on('show', state => {
            //     var slides = state.slides;
            //     slides.forEach(function (slide) {
            //         if (slide.classList.contains('is-current')){
            //             slide.style.zIndex = '1';
            //         } else {
            //             slide.style.zIndex = '0';
            //         }
            //     })
            // });
        }

        // Access to bulmaCarousel instance of an element
        /*
        var element = document.querySelector('#my-element');
        if (element && element.bulmaCarousel) {
            // bulmaCarousel instance is available as element.bulmaCarousel
            element.bulmaCarousel.on('before-show', function(state) {

            });
        }
        */
    </script>
{% endblock %}

